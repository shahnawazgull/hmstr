

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
          rel="stylesheet" />

    <link rel="stylesheet" href="/assets/styles/input.css" />

    <link rel="stylesheet" href="/assets/styles/profile.css" />

    <link rel="icon"
          type="image/svg+xml"
          href="https://hooksmerger.s3.amazonaws.com/assets/favicon.svg" />
    <title>HooksMaster.io</title>
<!--Start of Tawk.to Script-->
<script type="text/javascript">
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
  var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
  s1.async=true;
  s1.src='https://embed.tawk.to/67be2f5a29b02f190e366dc8/1ikvehuql';
  s1.charset='UTF-8';
  s1.setAttribute('crossorigin','*');
  s0.parentNode.insertBefore(s1,s0);
  })();
  </script>
  <!--End of Tawk.to Script-->
    <style>
      .color-value {
        background-color: transparent;
        border: none;
        width: 100%;
        outline: none;
      }

      [data-tooltip] {
        cursor: not-allowed;
        color: #999999;
        position: relative;
      }

      [data-tooltip]:after {
        content: attr(data-tooltip);
        padding: 6px 8px;
        position: absolute;
        left: 50%;
        bottom: 100%;
        transform: translateX(-50%);
        background-color: #000000aa;
        width: max-content;
        opacity: 0;
        visibility: hidden;
        -webkit-transition: all 0.2s ease-out;
        color: #ffffff;
        border-radius: 6px;
      }

      [data-tooltip]:hover:after {
        opacity: 1;
        visibility: visible;
      }

      .credit-score {
        font-family: 'Plus Jakarta Sans', sans-serif;
      }

      .content {
        width: 100%;
        max-width: 1600px;
        margin: 0 auto;
      }

      .block_a,
      .block_b {
        flex: 1 1 45%;
        /* Grow and shrink, but with a base of 45% */

      }

      .display.preview .head h1 #text {
        line-height: 1.25em;
        font-size: 36px;
        padding-left: 52px;
        padding-right: 52px;
      }

      .options {
        display: grid;
        gap: 10px;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        /* Automatically wrap */
        font-family: 'Plus Jakarta Sans', sans-serif;
      }

      .tiktok-spans {
        text-align: center;
        display: none;
        margin-top: 130px;
      }

      .tiktok-spans span {
        font-size: 21px;
        line-height: 30px;
        font-family: Poppins, sans-serif;
        background-color: #485AFF;
        color: #ffffff;
        border-radius: 8px;
        font-weight: 900;
        padding: 5px 8px;
      }

      .head {
        background-color: #485AFF;
      }


      /* New code */





.box_{
   width: 100%; /* Make the container full width */
   max-width: 100%; /* Prevent overflow */
   overflow: hidden; /
}

@media screen and (max-width: 1440px) and (min-width: 940px) {
   .box_ > video {
       height: auto;
       width: 100%;
   }
}

@media screen and (min-width: 1440px) {
   .box_ > video {
     height: auto;
     width: 100%;
   }
}

@media screen and (max-width: 1060px) {
   .box_ > video {
       height: auto;
       width: 100%;
   }
}

    </style>
  </head>

  <body>
    <div class="root">
      <header class="admin-header">
        <div class="container">
          <div class="header-two">
            <div class="hm-logo text-center">
              <img src="https://hooksmerger.s3.amazonaws.com/assets/white_logo.svg"
                   alt="VSL Logo"
                   onclick="window.location.href='/hooks/upload.html'"
                   style="cursor: pointer" />
            </div>
            <div class="header-profile">
              <div class="credit-score">
                <span>Credits Remaining:</span> <span>0</span>
              </div>
              <a href="#!" class="profile-icn">
                <img src="https://hooksmerger.s3.amazonaws.com/assets/user.svg" alt="User Profile" />
              </a>
            </div>
            <div class="profile-dialog">
              <div class="user">
                <h4>Nas</h4>
                <p>nas@nas.com</p>
              </div>
              <div class="buttons">
                <button onclick="window.location.href='/manage/subscription.html'">
                  Manage Subscription
                </button>
                
                  <button onclick="window.location.href='/merge/video-merger.html'">
                    Go To Video Merger
                  </button>
                
                <button>
                  Credit left <span>0</span>
                </button>
                <button>Affiliate</button>
                <button onclick="window.location.href='/'">
                  Logout
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div class="content">
        <form class="block_a"
              id="hooksForm"
              action="/hooks/upload/"
              method="post"
              enctype="multipart/form-data">

          <h1>Upload and customize</h1>
          <div class="box">
            <div class="wrapper" style="margin-top: 0;">
              <label for="dimension">Hooks Dimension:</label>
              <div class="options">
                <div class="option-box"
                     data-resolution="option1"
                     style="display: flex;
                            justify-content: center;
                            background: white;
                            text-align: center;
                            border-radius: 8px;
                            border: 1px solid #485AFF;
                            padding: 12px 8px;
                            cursor: pointer">
                  <input type="radio" name="resolution" value="option1" checked hidden />
                  <div style="display: flex; flex-direction: column; align-items: center;">
                    <div style="font-size: 18px;
                                font-weight: 500;
                                line-height: 21.94px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 30px">Square</div>
                    <div style="height: 100px;
                                width: 100px;
                                background: #D9D9D9;
                                border-radius: 8px;
                                margin-bottom: 8px;
                                border: 2px dashed"></div>
                    <div class="text"
                         style="font-size: 16px;
                                font-weight: 400;
                                line-height: 21.79px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 12px">1:1</div>
                    <div class="circle-outer"
                         style="width: 15px;
                                height: 15px;
                                border-radius: 90px;
                                border: 3px solid #485AFF;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                padding: 5px;
                                box-sizing: unset">
                      <div class="circle-inner"
                           style="width: 100%;
                                  height: 100%;
                                  border-radius: 90px;
                                  background: #485AFF"></div>
                    </div>
                  </div>
                </div>

                <!-- Option 2: TikTok/Short -->
                <div class="option-box"
                     data-resolution="option2"
                     style="display: flex;
                            justify-content: center;
                            background: white;
                            text-align: center;
                            border-radius: 8px;
                            border: 1px solid #88888877;
                            padding: 12px 8px;
                            cursor: pointer">
                  <input type="radio" name="resolution" value="option2" hidden />
                  <div style="display: flex; flex-direction: column; align-items: center;">
                    <div style="font-size: 18px;
                                font-weight: 500;
                                line-height: 21.94px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 30px">Portrait</div>
                    <div style="height: 100px;
                                width: 80px;
                                background: #D9D9D9;
                                border-radius: 8px;
                                margin-bottom: 8px;
                                border: 2px dashed"></div>
                    <div class="text"
                         style="font-size: 16px;
                                font-weight: 400;
                                line-height: 21.79px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 12px">4:5</div>
                    <div class="circle-outer"
                         style="width: 15px;
                                height: 15px;
                                border-radius: 90px;
                                border: 3px solid #D9D9D9;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                padding: 5px;
                                box-sizing: unset">
                      <div class="circle-inner"
                           style="width: 100%;
                                  height: 100%;
                                  border-radius: 90px;
                                  background: #D9D9D9"></div>
                    </div>
                  </div>
                </div>

                <!-- Option 3: YouTube -->
                <div class="option-box"
                     data-resolution="option3"
                     style="display: flex;
                            justify-content: center;
                            background: white;
                            text-align: center;
                            border-radius: 8px;
                            border: 1px solid #88888877;
                            padding: 12px 8px;
                            cursor: pointer">
                  <input type="radio" name="resolution" value="option3" hidden />
                  <div style="display: flex; flex-direction: column; align-items: center;">
                    <div style="font-size: 18px;
                                font-weight: 500;
                                line-height: 21.94px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 30px">TikTok/Reels</div>
                    <div style="height: 100px;
                                width: 56.25px;
                                background: #D9D9D9;
                                border-radius: 8px;
                                margin-bottom: 8px;
                                border: 2px dashed"></div>
                    <div class="text"
                         style="font-size: 16px;
                                font-weight: 400;
                                line-height: 21.79px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 12px">9:16</div>
                    <div class="circle-outer"
                         style="width: 15px;
                                height: 15px;
                                border-radius: 90px;
                                border: 3px solid #D9D9D9;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                padding: 5px;
                                box-sizing: unset">
                      <div class="circle-inner"
                           style="width: 100%;
                                  height: 100%;
                                  border-radius: 90px;
                                  background: #D9D9D9"></div>
                    </div>
                  </div>
                </div>

                <div class="option-box"
                     data-resolution="option4"
                     style="display: flex;
                            justify-content: center;
                            background: white;
                            text-align: center;
                            border-radius: 8px;
                            border: 1px solid #88888877;
                            padding: 12px 8px;
                            cursor: pointer">
                  <input type="radio" name="resolution" value="option4" hidden />
                  <div style="display: flex; flex-direction: column; align-items: center;">
                    <div style="font-size: 18px;
                                font-weight: 500;
                                line-height: 21.94px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 30px">YouTube</div>
                    <div style="height: 100px;
                                width: 155px;
                                background: #D9D9D9;
                                border-radius: 8px;
                                margin-bottom: 8px;
                                border: 2px dashed"></div>
                    <div class="text"
                         style="font-size: 16px;
                                font-weight: 400;
                                line-height: 21.79px;
                                letter-spacing: -0.03em;
                                text-align: center;
                                margin-bottom: 12px">16:9</div>
                    <div class="circle-outer"
                         style="width: 15px;
                                height: 15px;
                                border-radius: 90px;
                                border: 3px solid #D9D9D9;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                padding: 5px;
                                box-sizing: unset">
                      <div class="circle-inner"
                           style="width: 100%;
                                  height: 100%;
                                  border-radius: 90px;
                                  background: #D9D9D9"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <input hidden type="text" value="option1" id="jsResolution">
            <div class="upload_file_wrapper" id="hooksContentWrapper">
              <h4>Hooks Content:</h4>

              <label for="hooks" id="hookContentLabel">
                <img src="https://hooksmerger.s3.amazonaws.com/assets/upload_large.svg" alt="upload" />
                <span class="button">
                  <span>Click To Upload</span>
                </span>
                <span class="selected_file">No file chosen</span>
              </label>
              <input type="file" name="hooks_content" id="hooks" accept="video/mp4,video/x-m4v,video/*">
              <span id="fileError" class="error"></span>
            </div>

            <div class="wrapper">
              <label for="google_link">Google Sheets Link:</label>
              <input type="url" name="google_sheets_link" id="google_link" placeholder="Paste URL Link" maxlength="500">
              <span id="googleLinkError" class='error'></span> <!-- Error message -->
            </div>

            <div class="wrapper">
              <label for="api_key">Eleven Labs API Key:</label>
              <input type="text" name="eleven_labs_api_key" id="api_key" placeholder="Paste API Key" maxlength="255">
              <span id="keyError" class="error"></span>
            </div>

            <div class="wrapper">
              <label for="voice_id">Voice ID:</label>
              <input type="text" name="voice_id" id="voice_id" placeholder="Enter Voice ID" maxlength="255">
              <span id="apiKeyError" class='error'></span> <!-- Error message -->
            </div>
          </div>

          <h2>Customize your hook design</h2>
          <div class="box">
            <div class="color-picker-container">
              <label for="box_color">Main box color (Hex):</label>
              <div class="color-input-wrapper">
                <input type="color" name="box_color" value="#485AFF" class="color-input" value="#485AFF" id="boxcolor" required maxlength="7">
                <input class="color-value" id="boxColorText" type="text" value="#485AFF" />
              </div>
              <span id="boxColorError" class="error"></span>
            </div>
            <div class="color-picker-container">
              <label for="fontColor">Font color (Hex):</label>
              <div class="color-input-wrapper">
                <input type="color" name="font_color" value="#FFFFFF" class="color-input" value="#FFFFFF" id="fontcolor" required maxlength="7">
                <input class="color-value" id="fontColorText" type="text" value="#ffffff" />
              </div>
              <span id="fontColorError" class="error"></span>
            </div>
          </div>
          <input type="hidden" name="csrfmiddlewaretoken" value="LI48INWD6R7aUAKKe51jkekIqmTDsxa6UEEkpo4jSedRCzVEAFjZCcI2mo8nUC6t">
          <button type="submit" id="submit" style="max-width: unset;">
            Create
            <img src="https://hooksmerger.s3.amazonaws.com/assets/arrow_right_dark.svg" alt="arrow" />
          </button>
        </form>
        <div class="block_b">
          <h1>Tutorial</h1>
          <div class="display tutorial" style="background-color: unset;">
            <div class="box_" >
              <video loop   width="470px" controls class="video no-fullscreen"
              poster="https://hooksmerger.s3.amazonaws.com/video/tutorial_poster.png"
              >
                <source src="https://hooksmerger.s3.amazonaws.com/video/hook_tu.mp4" type="video/mp4">
                Your browser does not support the video tag.
              </video >
            </div>
            <!-- <img class="play" src="https://hooksmerger.s3.amazonaws.com/assets/play.svg" alt="play" /> -->
          </div>
          <hr />
          <h1>Preview</h1>
          <div class="display preview">
            <div id="tiktokBar"
                 style="position: absolute;
                        width: 100%;
                        left: 0;
                        top: 0;
                        display: none">
              <img style="width: 100%" src="https://hooksmerger.s3.amazonaws.com/assets/tiktok_bar.png" alt="" />
            </div>
            <div class="head" id="textbg" style="padding: 5px;">
              <h1 id="text">This Is How Your Hook Text Will Look Like On The Video</h1>
            </div>

            <div class="tiktok-spans">
              <span>This Is How Your Hook Text Will</span>
              <span>Look Like On The Video</span>
            </div>

            <div class="info">
              
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://hooksmerger.s3.amazonaws.com/control.js"></script>

    <script>
      let isValidVoiceId = false;
      let isValidApiKey = false;
      let isValidSpreadSheetLink = false;
      let isValidHooksContent = false;

      async function validateVoiceId() {
        if (document.querySelector('#voice_id').value.trim() === '') {
          document.querySelector('#apiKeyError').textContent = 'Voice ID Is Required';
          document.querySelector('#voice_id').style.border = '1px solid #ee6e68';
          isValidVoiceId = false;
        } else {
          document.querySelector('#apiKeyError').textContent = '';
          document.querySelector('#voice_id').style.border = '1px solid #19191980';

          isValidVoiceId = await validateVoiceIdAndApiKey();
        }
      }

      async function validateApiKey() {
        if (document.querySelector('#api_key').value.trim() === '') {
          document.querySelector('#keyError').textContent = 'Eleven Labs API Key Is Required';
          document.querySelector('#api_key').style.border = '1px solid #ee6e68';
          isValidApiKey = false;
        } else {
          document.querySelector('#keyError').textContent = '';
          document.querySelector('#api_key').style.border = '1px solid #19191980';

          isValidApiKey = await validateVoiceIdAndApiKey();
        }
      }

      async function validateVoiceIdAndApiKey() {
        const apiKey = document.querySelector('#api_key').value.trim();
        const voiceId = document.querySelector('#voice_id').value.trim();

        if (apiKey === '' || voiceId === '') {
          return false;
        }

        const formData = new FormData();
        formData.append('eleven_labs_api_key', apiKey);
        formData.append('voice_id', voiceId);

        const res = await fetch("/hooks/validate-api-key/", {
          method: 'POST',
          headers: {
            'X-CSRFToken': 'LI48INWD6R7aUAKKe51jkekIqmTDsxa6UEEkpo4jSedRCzVEAFjZCcI2mo8nUC6t',
          },
          body: formData,
        });

        const data = await res.json();

        if (data.valid) {
          document.querySelector('#keyError').textContent = '';
          document.querySelector('#api_key').style.border = '1px solid #19191980';

          document.querySelector('#apiKeyError').textContent = '';
          document.querySelector('#voice_id').style.border = '1px solid #19191980';

          return true;
        } else {
          if (data.error === 'quota_exceeded') {
            document.querySelector('#keyError').textContent = 'Insufficient Eleven Labs Quota';
            document.querySelector('#api_key').style.border = '1px solid #ee6e68';
          } else if (data.error === 'invalid_api_key' || data.error === 'api_key_not_verifiable') {
            document.querySelector('#keyError').textContent = 'Invalid API Key';
            document.querySelector('#api_key').style.border = '1px solid #ee6e68';
          } else if (data.error === 'detected_unusual_activity') {
            document.querySelector('#keyError').textContent = 'Error: Eleven Labs Detected Unusual Activity, Disabling Free Tier Usage';
            document.querySelector('#api_key').style.border = '1px solid #ee6e68';
          } else if (data.error === 'voice_not_found') {
            document.querySelector('#keyError').textContent = '';
            document.querySelector('#api_key').style.border = '1px solid #19191980';

            document.querySelector('#apiKeyError').textContent = 'Invalid Voice ID';
            document.querySelector('#voice_id').style.border = '1px solid #ee6e68';
          } else {
            document.querySelector('#keyError').textContent = 'Unexpected Error Happened: ' + data.message;
            document.querySelector('#api_key').style.border = '1px solid #ee6e68';

            document.querySelector('#apiKeyError').textContent = 'Unexpected Error Happened: ' + data.message;
            document.querySelector('#voice_id').style.border = '1px solid #ee6e68';
          }

          return false;
        }
      }

      async function validateGoogleSheetLink() {
        if (document.querySelector('#google_link').value.trim() === '') {
          document.querySelector('#googleLinkError').textContent = 'Google Sheets Link Is Required';
          document.querySelector('#google_link').style.border = '1px solid #ee6e68';

          isValidSpreadSheetLink = false;
        } else {
          let googleSheetLink = document.querySelector('#google_link').value.trim();

          const formData = new FormData();
          formData.append('google_sheets_link', googleSheetLink);

          const res = await fetch("/hooks/validate-google-sheet-link/", {
            method: 'POST',
            headers: {
              'X-CSRFToken': 'LI48INWD6R7aUAKKe51jkekIqmTDsxa6UEEkpo4jSedRCzVEAFjZCcI2mo8nUC6t',
            },
            body: formData,
          });

          const data = await res.json();

          if (data.valid) {
            document.querySelector('#googleLinkError').textContent = '';
            document.querySelector('#google_link').style.border = '1px solid #19191980';
            const nRows=data.rows 
            console.log(nRows)
            if (data.a_line_more_60 && document.getElementById('jsResolution').value === 'option3'){
            isValidSpreadSheetLink = false;
            document.querySelector('#google_link').style.border = '1px solid #19191980';

            // alert('Each Line In Your Google Sheet Should Not Be More Than 60 Characters')
            document.querySelector('#googleLinkError').textContent = 'TikTok Hooks Are Limited To 60 characters or fewer. Please ensure each hook in your Google Sheet does not exceed this limit';



            }
            
            else if ('0'<nRows){
              alert(`Your Credit Is Not Enough To Process ${nRows} Rows. You Have Just  0 Credits Left`)
            isValidSpreadSheetLink = false;
            document.querySelector('#google_link').style.border='1px solid red'

            }else{
            isValidSpreadSheetLink = true;

            }

          } else {
            document.querySelector('#googleLinkError').textContent = data.error;
            document.querySelector('#google_link').style.border = '1px solid #ee6e68';
            isValidSpreadSheetLink = false;
          }
        }
      }

      function validateHooksContent() {
        // if (document.querySelector('#hooks').files.length <= 0) {
        //   document.querySelector('#fileError').textContent = 'Hooks Content Is Required';
        //   document.querySelector('#hookContentLabel').style.border = '2px dashed #ee6e68';
        //   isValidHooksContent = false;
        
        // }else {
        //   document.querySelector('#fileError').textContent = '';
        //   document.querySelector('#hookContentLabel').style.border = '2px dashed #19191980';
        //   isValidHooksContent = true;
        // }

        const hooksInput = document.getElementById('hooks');
    const fileError = document.querySelector('#fileError');
    const hookContentLabel = document.querySelector('#hookContentLabel');

        if (hooksInput.files.length <= 0) {
        fileError.textContent = 'Hooks Content Is Required';
        hookContentLabel.style.border = '2px dashed #ee6e68';
        isValidHooksContent = false;
    } else if (hooksInput.files[0].size > 1 * 1024 * 1024 * 1024) {
        fileError.textContent = 'File size must not exceed 1 GB';
        hookContentLabel.style.border = '2px dashed #ee6e68';
        isValidHooksContent = false;
    } else {
        fileError.textContent = '';
        hookContentLabel.style.border = '2px dashed #19191980';
        isValidHooksContent = true;
    }
      }

      let validationTimeoutIds = {};

      function validateInputOnIdle(inputId, idleDelay, validationCallback) {
        document.querySelector(`#${inputId}`).addEventListener('input', () => {
          clearTimeout(validationTimeoutIds[inputId]);
          validationTimeoutIds[inputId] = setTimeout(validationCallback, idleDelay);
        });
      }

      //validateInputOnIdle('voice_id', 300, validateVoiceId)
      //validateInputOnIdle('api_key', 300, validateApiKey)
      //validateInputOnIdle('google_link', 300, validateGoogleSheetLink)

      //document.querySelector('#hooks').addEventListener('change', validateHooksContent);

      let interval;

function startAnimation() {
    let button = document.getElementById("submit");
    let dots = "";
    let count = 0;
    button.textContent = "Processing";
    
    interval = setInterval(() => {
        count = (count + 1) % 4;
        dots = ".".repeat(count);
        button.textContent = `Processing${dots}`;
    }, 500);
}

function stopAnimation() {
    clearInterval(interval);
    let button = document.getElementById("submit");
    button.textContent = "Create";
}



      document.querySelector('#hooks').addEventListener('change', (e) => {
        if (e.target.files.length > 0 && e.target.files[0].size <= 1 * 1024 * 1024 * 1024) {
          
          const fileName = e.target.files[0].name;
          document.querySelector('.selected_file').textContent = fileName;
          
        } else {
          document.querySelector('.selected_file').textContent = 'No File Chosen';
        }
      });

      const hooksForm = document.querySelector('#hooksForm');
      hooksForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        startAnimation()


        if (!isValidVoiceId) {
          await validateVoiceId();
          //stopAnimation()
        }

        if (!isValidApiKey) {
          await validateApiKey();
          //stopAnimation()
        }

        if (!isValidSpreadSheetLink) {
          await validateGoogleSheetLink();
          //stopAnimation()
        }

        if (!isValidHooksContent) {
          validateHooksContent();
          //stopAnimation()
        }

        if (isValidVoiceId && isValidApiKey && isValidSpreadSheetLink && isValidHooksContent) {
          hooksForm.constructor.prototype.submit.call(hooksForm);
          //stopAnimation()
        } else {
          stopAnimation()
          document.querySelector('#hooksContentWrapper').scrollIntoView({
            behavior: 'smooth',
          });
        }
      });
    </script>

    <script>
      function resetAllOptions() {
        const allBoxes = document.querySelectorAll('.option-box');
        const allCirclesOuter = document.querySelectorAll('.circle-outer');
        const allCirclesInner = document.querySelectorAll('.circle-inner');

        allBoxes.forEach((box) => {
          box.style.border = '1px solid #88888877';
        });

        allCirclesOuter.forEach((circleOuter) => {
          circleOuter.style.border = '3px solid #D9D9D9';
        });

        allCirclesInner.forEach((circleInner) => {
          circleInner.style.backgroundColor = '#D9D9D9';
        });
      }

      function selectOption(resolution) {
        resetAllOptions();
        document.getElementById('jsResolution').value=resolution
        console.log(document.getElementById('jsResolution'))

        const selectedBox = document.querySelector(
          `.option-box[data-resolution="${resolution}"]`,
        );
        const selectedCircleOuter = selectedBox.querySelector('.circle-outer');
        const selectedCircleInner = selectedBox.querySelector('.circle-inner');

        selectedBox.style.border = '1px solid #485AFF';
        selectedCircleOuter.style.border = '3px solid #485AFF';
        selectedCircleInner.style.backgroundColor = '#485AFF';

        document.querySelector(`input[value="${resolution}"]`).checked = true;
      }

      function adjustPreviewBox(resolution) {
        const previewDims = {
          option1: {
            width: 667,
            height: 667,
            paddingX: 52,
            fontSize: 36,
          },
          option2: {
            width: 533,
            height: 667,
            paddingX: 20,
            fontSize: 33,
          },
          option3: {
            width: 375,
            height: 667,
            paddingX: 20,
            fontSize: 24,
          },
          option4: {
            width: 667,
            height: 375,
            paddingX: 30,
            fontSize: 36,
          },
        };

        const headTag = document.querySelector('.head h1');
        const screenWidth = window.innerWidth;

        if (screenWidth <= 480) {
          previewDims.option3.width = 280;
          previewDims.option3.height = 500;
          headTag.style.lineHeight = '21px';
        } else if (screenWidth <= 768) {
          previewDims.option3.width = 320;
          previewDims.option3.height = 568;
        } else {
          previewDims.option3.width = 375;
          previewDims.option3.height = 667;
        }

        if (screenWidth <= 480) {
          previewDims.option1.width = 361;
          previewDims.option1.height = 390;
          previewDims.option2.width = 300;
          previewDims.option2.height = 380;
          previewDims.option4.width = 355;
          previewDims.option4.height = 300;
        } else if (screenWidth <= 768) {
          previewDims.option1.width = 320;
          previewDims.option1.height = 568;
          previewDims.option2.width = 320;
          previewDims.option2.height = 568;
          previewDims.option4.width = 320;
          previewDims.option4.height = 568;
        } else if (screenWidth <= 912) {
          previewDims.option4.width = 590;
          previewDims.option4.height = 380;
        } else if (screenWidth <= 1439) {
          previewDims.option1.width = 450;
          previewDims.option4.width = 450;
          previewDims.option4.height = 439;
        }

        let fontSize = previewDims[resolution].fontSize;

        if (screenWidth <= 600) {
          fontSize = Math.floor(fontSize * 0.56);
        } else if (screenWidth <= 650) {
          fontSize = Math.floor(fontSize * 0.65);
        } else if (screenWidth <= 768) {
          fontSize = Math.floor(fontSize * 0.9);
        } else if (screenWidth <= 1280) {
          fontSize = Math.floor(fontSize * 0.9);
        }

        let paddingX = previewDims[resolution].paddingX;

        if (screenWidth <= 480 && resolution !== 'option3') {
          paddingX = Math.floor(paddingX * 0.4);
        } else if (screenWidth <= 650 && resolution !== 'option3') {
          paddingX = Math.floor(paddingX * 0.6);
        } else if (screenWidth <= 768 && resolution !== 'option3') {
          paddingX = Math.floor(paddingX * 0.9);
        } else if (screenWidth <= 1280 && resolution !== 'option3') {
          paddingX = Math.floor(paddingX * 0.9);
        }

        const previewBox = document.querySelector('.preview');
        const textElement = document.querySelector('#text');
        const tiktokBar = document.querySelector('#tiktokBar');
        const head = document.querySelector('.head');



        previewBox.style.width = `${previewDims[resolution].width}px`;
        previewBox.style.height = `${previewDims[resolution].height}px`;
        textElement.style.paddingLeft = `${paddingX}px`;
        textElement.style.paddingRight = `${paddingX}px`;
        previewBox.style.margin = '0 auto';
        previewBox.style.marginBottom = '2rem';
        textElement.style.fontSize = `${fontSize}px`;

        if (resolution === 'option3') {
          head.style.display = 'none';
          tiktokBar.style.display = 'block';
          document.querySelector('.tiktok-spans').style.display = 'block';
          if (screenWidth >= 1200) {
            headTag.style.lineHeight = '30px';
          }
        } else {
          head.style.display = 'block';
          tiktokBar.style.display = 'none';
          document.querySelector('.tiktok-spans').style.display = 'none';
          if (screenWidth >= 1200) {
            headTag.style.lineHeight = '40px';
          }
        }
      }

      document.querySelectorAll('.option-box').forEach((boxElement) => {
        boxElement.addEventListener('click', function() {
          const resolution = this.getAttribute('data-resolution');
          selectOption(resolution);
          adjustPreviewBox(resolution);
        });
      });
    </script>

    <script>
      const boxColorInput = document.querySelector('#boxcolor');
      const fontColorInput = document.querySelector('#fontcolor');
      const boxColorTextInput = document.querySelector('#boxColorText');
      const fontColorTextInput = document.querySelector('#fontColorText');

      boxColorInput.addEventListener('input', function() {
        if (boxColorTextInput.value !== boxColorInput.value) {
          boxColorTextInput.value = boxColorInput.value;
          boxColorTextInput.dispatchEvent(new Event('input'));
        }
      });

      fontColorInput.addEventListener('input', function() {
        if (fontColorTextInput.value !== fontColorInput.value) {
          fontColorTextInput.value = fontColorInput.value;
          fontColorTextInput.dispatchEvent(new Event('input'));
        }
      });

      boxColorTextInput.addEventListener('input', function() {
        const color = boxColorTextInput.value;

        if (color === '') {
          document.querySelector('#boxColorError').style.display = 'block';
          document.querySelector('#boxColorError').textContent =
            'Main Box Color Is Required';

          return false;
        }

        const hexColorPattern = /^#[0-9a-fA-F]{6}$/;
        const isValidHexColor = hexColorPattern.test(color);

        if (!isValidHexColor) {
          document.querySelector('#boxColorError').style.display = 'block';
          document.querySelector('#boxColorError').textContent = 'Invalid Hex Color';

          return false;
        }

        document.querySelector('#boxColorError').style.display = 'none';
        document.querySelector('#boxColorError').textContent = '';

        if (boxColorInput.value === color) {
          return false;
        }

        boxColorInput.value = color;
        boxColorInput.dispatchEvent(new Event('input'));
      });

      fontColorTextInput.addEventListener('input', function() {
        const color = fontColorTextInput.value;

        if (color === '') {
          document.querySelector('#fontColorError').style.display = 'block';
          document.querySelector('#fontColorError').textContent =
            'Font Color Is Required';

          return false;
        }

        const hexColorPattern = /^#[0-9a-fA-F]{6}$/;
        const isValidHexColor = hexColorPattern.test(color);

        if (!isValidHexColor) {
          document.querySelector('#fontColorError').style.display = 'block';
          document.querySelector('#fontColorError').textContent = 'Invalid Hex Color';

          return false;
        }

        document.querySelector('#fontColorError').style.display = 'none';
        document.querySelector('#fontColorError').textContent = '';

        if (fontColorInput.value === color) {
          return false;
        }

        fontColorInput.value = color;
        fontColorInput.dispatchEvent(new Event('input'));
      });

      boxColorInput.addEventListener('input', function () {
        document.querySelectorAll('.tiktok-spans span').forEach((spanEl) => {
          spanEl.style.background= `${boxColorInput.value}`;
        });
      });

      fontcolor.addEventListener('input', function () {
        document.querySelectorAll('.tiktok-spans span').forEach((spanEl) => {
          spanEl.style.color= `${fontColorInput.value}`;
        });
      });
    </script>
  </body>

</html>
